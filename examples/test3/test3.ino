#include "I2CCom.h"
I2CCom_Master I2CCom(&Wire1);
#include "GraphicsCardI2CCom.h"
GraphicsCardI2CCom gI2C(&I2CCom);

uint8_t testimg[] = {0x1, 0xFF, 0x0, 0x27, 0x0, 0x13, 0xFB, 0x0, 0x28, 0x0, 0x13, 0xF6, 0x0, 0x32, 0x0, 0x13, 0xFF, 0x0, 0x24, 0x0, 0x14, 0xF6, 0x0, 0x27, 0x0, 0x14, 0xFB, 0x0, 0x28, 0x0, 0x14, 0xFF, 0x0, 0x32, 0x0, 0x14, 0xF6, 0x0, 0x33, 0x0, 0x14, 0xF2, 0x0, 0x34, 0x0, 0x14, 0xFF, 0x0, 0x22, 0x0, 0x15, 0xF6, 0x0, 0x23, 0x0, 0x15, 0xFB, 0x0, 0x24, 0x0, 0x15, 0xFF, 0x0, 0x34, 0x0, 0x15, 0xF2, 0x0, 0x35, 0x0, 0x15, 0xFB, 0x0, 0x36, 0x0, 0x15, 0xFF, 0x0, 0x20, 0x0, 0x16, 0xF2, 0x0, 0x21, 0x0, 0x16, 0xFB, 0x0, 0x22, 0x0, 0x16, 0xFF, 0x0, 0x36, 0x0, 0x16, 0xF2, 0x0, 0x37, 0x0, 0x16, 0xFF, 0x0, 0x1F, 0x0, 0x17, 0xF6, 0x0, 0x20, 0x0, 0x17, 0xFF, 0x0, 0x37, 0x0, 0x17, 0xF2, 0x0, 0x38, 0x0, 0x17, 0xFF, 0x0, 0x1E, 0x0, 0x18, 0xF6, 0x0, 0x1F, 0x0, 0x18, 0xFF, 0x0, 0x38, 0x0, 0x18, 0xF2, 0x0, 0x39, 0x0, 0x18, 0xFF, 0x0, 0x1D, 0x0, 0x19, 0xFB, 0x0, 0x1E, 0x0, 0x19, 0xF6, 0x0, 0x1F, 0x0, 0x19, 0xFF, 0x0, 0x32, 0x0, 0x19, 0xDF, 0x0, 0x34, 0x0, 0x19, 0xFF, 0x0, 0x39, 0x0, 0x19, 0xED, 0x0, 0x3A, 0x0, 0x19, 0xFF, 0x0, 0x1D, 0x0, 0x1A, 0xF2, 0x0, 0x1E, 0x0, 0x1A, 0xFF, 0x0, 0x2F, 0x0, 0x1A, 0x9A, 0x0, 0x30, 0x0, 0x1A, 0x14, 0x0, 0x31, 0x0, 0x1A, 0x59, 0x0, 0x32, 0x0, 0x1A, 0x9A, 0x0, 0x33, 0x0, 0x1A, 0x7A, 0x0, 0x34, 0x0, 0x1A, 0x14, 0x0, 0x35, 0x0, 0x1A, 0xDF, 0x0, 0x36, 0x0, 0x1A, 0xFF, 0x0, 0x3A, 0x0, 0x1A, 0xF2, 0x0, 0x3B, 0x0, 0x1A, 0xFF, 0x0, 0x2E, 0x0, 0x1B, 0x15, 0x0, 0x2F, 0x0, 0x1B, 0x7A, 0x0, 0x30, 0x0, 0x1B, 0xFF, 0x0, 0x35, 0x0, 0x1B, 0x59, 0x0, 0x36, 0x0, 0x1B, 0x35, 0x0, 0x37, 0x0, 0x1B, 0xFF, 0x0, 0x1C, 0x0, 0x1C, 0xF2, 0x0, 0x1D, 0x0, 0x1C, 0xFF, 0x0, 0x2C, 0x0, 0x1C, 0x7A, 0x0, 0x2D, 0x0, 0x1C, 0x35, 0x0, 0x2E, 0x0, 0x1C, 0xFF, 0x0, 0x37, 0x0, 0x1C, 0x14, 0x0, 0x38, 0x0, 0x1C, 0xDF, 0x0, 0x39, 0x0, 0x1C, 0xFF, 0x0, 0x3B, 0x0, 0x1C, 0xF2, 0x0, 0x3C, 0x0, 0x1C, 0xFF, 0x0, 0x1C, 0x0, 0x1D, 0xF6, 0x0, 0x1D, 0x0, 0x1D, 0xFF, 0x0, 0x2B, 0x0, 0x1D, 0x14, 0x0, 0x2C, 0x0, 0x1D, 0xBF, 0x0, 0x2D, 0x0, 0x1D, 0xFF, 0x0, 0x38, 0x0, 0x1D, 0x14, 0x0, 0x39, 0x0, 0x1D, 0xFF, 0x0, 0x3C, 0x0, 0x1D, 0xF2, 0x0, 0x3D, 0x0, 0x1D, 0xFF, 0x0, 0x1C, 0x0, 0x1E, 0xF6, 0x0, 0x1D, 0x0, 0x1E, 0xFF, 0x0, 0x2A, 0x0, 0x1E, 0x35, 0x0, 0x2B, 0x0, 0x1E, 0xDF, 0x0, 0x2C, 0x0, 0x1E, 0xFF, 0x0, 0x39, 0x0, 0x1E, 0x35, 0x0, 0x3A, 0x0, 0x1E, 0xFF, 0x0, 0x3C, 0x0, 0x1E, 0xF6, 0x0, 0x3D, 0x0, 0x1E, 0xFF, 0x0, 0x1C, 0x0, 0x1F, 0xF6, 0x0, 0x1D, 0x0, 0x1F, 0xFF, 0x0, 0x29, 0x0, 0x1F, 0x9A, 0x0, 0x2A, 0x0, 0x1F, 0x7A, 0x0, 0x2B, 0x0, 0x1F, 0xFF, 0x0, 0x39, 0x0, 0x1F, 0x59, 0x0, 0x3A, 0x0, 0x1F, 0xDF, 0x0, 0x3B, 0x0, 0x1F, 0xFF, 0x0, 0x3D, 0x0, 0x1F, 0xF2, 0x0, 0x3E, 0x0, 0x1F, 0xFF, 0x0, 0x1C, 0x0, 0x20, 0xFB, 0x0, 0x1D, 0x0, 0x20, 0xFF, 0x0, 0x29, 0x0, 0x20, 0x14, 0x0, 0x2A, 0x0, 0x20, 0xFF, 0x0, 0x3A, 0x0, 0x20, 0x35, 0x0, 0x3B, 0x0, 0x20, 0xFF, 0x0, 0x3D, 0x0, 0x20, 0xF6, 0x0, 0x3E, 0x0, 0x20, 0xFF, 0x0, 0x28, 0x0, 0x21, 0x7A, 0x0, 0x29, 0x0, 0x21, 0x9A, 0x0, 0x2A, 0x0, 0x21, 0xFF, 0x0, 0x3A, 0x0, 0x21, 0x59, 0x0, 0x3B, 0x0, 0x21, 0xDF, 0x0, 0x3C, 0x0, 0x21, 0xFF, 0x0, 0x3D, 0x0, 0x21, 0xFB, 0x0, 0x3E, 0x0, 0x21, 0xFF, 0x0, 0x19, 0x0, 0x22, 0xF6, 0x0, 0x1D, 0x0, 0x22, 0xFB, 0x0, 0x1E, 0x0, 0x22, 0xFF, 0x0, 0x28, 0x0, 0x22, 0x35, 0x0, 0x29, 0x0, 0x22, 0xFF, 0x0, 0x3A, 0x0, 0x22, 0xDF, 0x0, 0x3B, 0x0, 0x22, 0x7A, 0x0, 0x3C, 0x0, 0x22, 0xFF, 0x0, 0x3E, 0x0, 0x22, 0xF2, 0x0, 0x3F, 0x0, 0x22, 0xFF, 0x0, 0x18, 0x0, 0x23, 0xF6, 0x0, 0x19, 0x0, 0x23, 0xFF, 0x0, 0x1E, 0x0, 0x23, 0xF2, 0x0, 0x1F, 0x0, 0x23, 0xFF, 0x0, 0x27, 0x0, 0x23, 0x7A, 0x0, 0x28, 0x0, 0x23, 0xBF, 0x0, 0x29, 0x0, 0x23, 0xFF, 0x0, 0x3A, 0x0, 0x23, 0xDF, 0x0, 0x3B, 0x0, 0x23, 0x59, 0x0, 0x3C, 0x0, 0x23, 0xFF, 0x0, 0x3E, 0x0, 0x23, 0xF6, 0x0, 0x3F, 0x0, 0x23, 0xFF, 0x0, 0x18, 0x0, 0x24, 0xF6, 0x0, 0x19, 0x0, 0x24, 0xFF, 0x0, 0x1F, 0x0, 0x24, 0xFB, 0x0, 0x21, 0x0, 0x24, 0xFF, 0x0, 0x27, 0x0, 0x24, 0x35, 0x0, 0x28, 0x0, 0x24, 0xFF, 0x0, 0x3B, 0x0, 0x24, 0x35, 0x0, 0x3C, 0x0, 0x24, 0xFF, 0x0, 0x3E, 0x0, 0x24, 0xF6, 0x0, 0x3F, 0x0, 0x24, 0xFF, 0x0, 0x17, 0x0, 0x25, 0xF2, 0x0, 0x18, 0x0, 0x25, 0xFF, 0x0, 0x20, 0x0, 0x25, 0xFB, 0x0, 0x21, 0x0, 0x25, 0xF6, 0x0, 0x22, 0x0, 0x25, 0xFF, 0x0, 0x27, 0x0, 0x25, 0x35, 0x0, 0x28, 0x0, 0x25, 0xFF, 0x0, 0x3B, 0x0, 0x25, 0x35, 0x0, 0x3C, 0x0, 0x25, 0xFF, 0x0, 0x3F, 0x0, 0x25, 0xF6, 0x0, 0x40, 0x0, 0x25, 0xFF, 0x0, 0x17, 0x0, 0x26, 0xF6, 0x0, 0x18, 0x0, 0x26, 0xFF, 0x0, 0x22, 0x0, 0x26, 0xF2, 0x0, 0x23, 0x0, 0x26, 0xFF, 0x0, 0x27, 0x0, 0x26, 0x35, 0x0, 0x28, 0x0, 0x26, 0xFF, 0x0, 0x3B, 0x0, 0x26, 0x35, 0x0, 0x3C, 0x0, 0x26, 0xFF, 0x0, 0x3F, 0x0, 0x26, 0xF6, 0x0, 0x40, 0x0, 0x26, 0xFF, 0x0, 0x17, 0x0, 0x27, 0xF6, 0x0, 0x18, 0x0, 0x27, 0xFF, 0x0, 0x23, 0x0, 0x27, 0xF6, 0x0, 0x24, 0x0, 0x27, 0xFF, 0x0, 0x27, 0x0, 0x27, 0x7A, 0x0, 0x28, 0x0, 0x27, 0x9A, 0x0, 0x29, 0x0, 0x27, 0xFF, 0x0, 0x34, 0x0, 0x27, 0xFB, 0x0, 0x35, 0x0, 0x27, 0xF6, 0x0, 0x36, 0x0, 0x27, 0xF2, 0x0, 0x37, 0x0, 0x27, 0xFF, 0x0, 0x3B, 0x0, 0x27, 0x55, 0x0, 0x3C, 0x0, 0x27, 0xFF, 0x0, 0x3F, 0x0, 0x27, 0xFB, 0x0, 0x40, 0x0, 0x27, 0xFF, 0x0, 0x16, 0x0, 0x28, 0xF6, 0x0, 0x17, 0x0, 0x28, 0xFF, 0x0, 0x24, 0x0, 0x28, 0xFB, 0x0, 0x26, 0x0, 0x28, 0xFF, 0x0, 0x33, 0x0, 0x28, 0xF2, 0x0, 0x34, 0x0, 0x28, 0xFF, 0x0, 0x37, 0x0, 0x28, 0xF6, 0x0, 0x38, 0x0, 0x28, 0xFF, 0x0, 0x3A, 0x0, 0x28, 0x59, 0x0, 0x3B, 0x0, 0x28, 0xDF, 0x0, 0x3C, 0x0, 0x28, 0xFF, 0x0, 0x40, 0x0, 0x28, 0xF6, 0x0, 0x41, 0x0, 0x28, 0xFF, 0x0, 0x16, 0x0, 0x29, 0xF6, 0x0, 0x17, 0x0, 0x29, 0xFF, 0x0, 0x26, 0x0, 0x29, 0xF6, 0x0, 0x27, 0x0, 0x29, 0xFF, 0x0, 0x32, 0x0, 0x29, 0xF2, 0x0, 0x33, 0x0, 0x29, 0xFF, 0x0, 0x38, 0x0, 0x29, 0xF6, 0x0, 0x39, 0x0, 0x29, 0xFF, 0x0, 0x3A, 0x0, 0x29, 0x15, 0x0, 0x3B, 0x0, 0x29, 0xFF, 0x0, 0x40, 0x0, 0x29, 0xF6, 0x0, 0x41, 0x0, 0x29, 0xFF, 0x0, 0x16, 0x0, 0x2A, 0xF6, 0x0, 0x17, 0x0, 0x2A, 0xFF, 0x0, 0x27, 0x0, 0x2A, 0xFB, 0x0, 0x29, 0x0, 0x2A, 0xFF, 0x0, 0x31, 0x0, 0x2A, 0xFB, 0x0, 0x32, 0x0, 0x2A, 0xFF, 0x0, 0x39, 0x0, 0x2A, 0x30, 0x0, 0x3A, 0x0, 0x2A, 0xBF, 0x0, 0x3B, 0x0, 0x2A, 0xFF, 0x0, 0x40, 0x0, 0x2A, 0xFB, 0x0, 0x42, 0x0, 0x2A, 0xFF, 0x0, 0x16, 0x0, 0x2B, 0xF6, 0x0, 0x17, 0x0, 0x2B, 0xFF, 0x0, 0x28, 0x0, 0x2B, 0xF6, 0x0, 0x29, 0x0, 0x2B, 0xFF, 0x0, 0x2D, 0x0, 0x2B, 0x7A, 0x0, 0x2E, 0x0, 0x2B, 0x35, 0x0, 0x2F, 0x0, 0x2B, 0xDF, 0x0, 0x30, 0x0, 0x2B, 0xFF, 0x0, 0x31, 0x0, 0x2B, 0xFB, 0x0, 0x32, 0x0, 0x2B, 0xFF, 0x0, 0x38, 0x0, 0x2B, 0x35, 0x0, 0x39, 0x0, 0x2B, 0xBF, 0x0, 0x3A, 0x0, 0x2B, 0xF2, 0x0, 0x3B, 0x0, 0x2B, 0xFF, 0x0, 0x41, 0x0, 0x2B, 0xF6, 0x0, 0x42, 0x0, 0x2B, 0xFF, 0x0, 0x16, 0x0, 0x2C, 0xF6, 0x0, 0x17, 0x0, 0x2C, 0xFF, 0x0, 0x29, 0x0, 0x2C, 0xF6, 0x0, 0x2A, 0x0, 0x2C, 0xFF, 0x0, 0x2D, 0x0, 0x2C, 0xDF, 0x0, 0x2E, 0x0, 0x2C, 0x59, 0x0, 0x2F, 0x0, 0x2C, 0x14, 0x0, 0x30, 0x0, 0x2C, 0x95, 0x0, 0x31, 0x0, 0x2C, 0xDF, 0x0, 0x36, 0x0, 0x2C, 0x9A, 0x0, 0x37, 0x0, 0x2C, 0x15, 0x0, 0x38, 0x0, 0x2C, 0xBF, 0x0, 0x39, 0x0, 0x2C, 0xFF, 0x0, 0x3A, 0x0, 0x2C, 0xFB, 0x0, 0x3B, 0x0, 0x2C, 0xFF, 0x0, 0x41, 0x0, 0x2C, 0xF6, 0x0, 0x42, 0x0, 0x2C, 0xFF, 0x0, 0x16, 0x0, 0x2D, 0xF6, 0x0, 0x17, 0x0, 0x2D, 0xFF, 0x0, 0x2A, 0x0, 0x2D, 0xF6, 0x0, 0x2B, 0x0, 0x2D, 0xFF, 0x0, 0x2F, 0x0, 0x2D, 0xFB, 0x0, 0x30, 0x0, 0x2D, 0x7A, 0x0, 0x31, 0x0, 0x2D, 0x14, 0x0, 0x32, 0x0, 0x2D, 0x9A, 0x0, 0x33, 0x0, 0x2D, 0x7A, 0x0, 0x36, 0x0, 0x2D, 0xBA, 0x0, 0x37, 0x0, 0x2D, 0xFF, 0x0, 0x3B, 0x0, 0x2D, 0xF2, 0x0, 0x3C, 0x0, 0x2D, 0xFF, 0x0, 0x41, 0x0, 0x2D, 0xFB, 0x0, 0x43, 0x0, 0x2D, 0xFF, 0x0, 0x16, 0x0, 0x2E, 0xF6, 0x0, 0x17, 0x0, 0x2E, 0xFF, 0x0, 0x2B, 0x0, 0x2E, 0xF2, 0x0, 0x2C, 0x0, 0x2E, 0xFF, 0x0, 0x2F, 0x0, 0x2E, 0xFB, 0x0, 0x30, 0x0, 0x2E, 0xFF, 0x0, 0x31, 0x0, 0x2E, 0x59, 0x0, 0x32, 0x0, 0x2E, 0xBF, 0x0, 0x33, 0x0, 0x2E, 0xFF, 0x0, 0x3B, 0x0, 0x2E, 0xF6, 0x0, 0x3C, 0x0, 0x2E, 0xFF, 0x0, 0x42, 0x0, 0x2E, 0xF6, 0x0, 0x43, 0x0, 0x2E, 0xFF, 0x0, 0x16, 0x0, 0x2F, 0xF6, 0x0, 0x17, 0x0, 0x2F, 0xFF, 0x0, 0x2C, 0x0, 0x2F, 0xFB, 0x0, 0x2D, 0x0, 0x2F, 0xFF, 0x0, 0x2E, 0x0, 0x2F, 0xF6, 0x0, 0x2F, 0x0, 0x2F, 0xFF, 0x0, 0x32, 0x0, 0x2F, 0x15, 0x0, 0x33, 0x0, 0x2F, 0xFF, 0x0, 0x3B, 0x0, 0x2F, 0xF6, 0x0, 0x3C, 0x0, 0x2F, 0xFF, 0x0, 0x42, 0x0, 0x2F, 0xF6, 0x0, 0x43, 0x0, 0x2F, 0xFF, 0x0, 0x16, 0x0, 0x30, 0xF6, 0x0, 0x17, 0x0, 0x30, 0xFF, 0x0, 0x2D, 0x0, 0x30, 0xED, 0x0, 0x2E, 0x0, 0x30, 0xFF, 0x0, 0x33, 0x0, 0x30, 0x14, 0x0, 0x34, 0x0, 0x30, 0xFF, 0x0, 0x3B, 0x0, 0x30, 0xF6, 0x0, 0x3C, 0x0, 0x30, 0xFF, 0x0, 0x42, 0x0, 0x30, 0xFB, 0x0, 0x43, 0x0, 0x30, 0xFF, 0x0, 0x16, 0x0, 0x31, 0xF6, 0x0, 0x17, 0x0, 0x31, 0xFF, 0x0, 0x2C, 0x0, 0x31, 0xFB, 0x0, 0x2F, 0x0, 0x31, 0xFF, 0x0, 0x33, 0x0, 0x31, 0xBF, 0x0, 0x34, 0x0, 0x31, 0x59, 0x0, 0x35, 0x0, 0x31, 0xFF, 0x0, 0x3B, 0x0, 0x31, 0xF6, 0x0, 0x3C, 0x0, 0x31, 0xFF, 0x0, 0x43, 0x0, 0x31, 0xF6, 0x0, 0x44, 0x0, 0x31, 0xFF, 0x0, 0x16, 0x0, 0x32, 0xF6, 0x0, 0x17, 0x0, 0x32, 0xFF, 0x0, 0x2C, 0x0, 0x32, 0xF6, 0x0, 0x2D, 0x0, 0x32, 0xFF, 0x0, 0x2F, 0x0, 0x32, 0xF2, 0x0, 0x30, 0x0, 0x32, 0xFF, 0x0, 0x34, 0x0, 0x32, 0x35, 0x0, 0x35, 0x0, 0x32, 0xDF, 0x0, 0x36, 0x0, 0x32, 0xFF, 0x0, 0x3B, 0x0, 0x32, 0xF2, 0x0, 0x3C, 0x0, 0x32, 0xFF, 0x0, 0x43, 0x0, 0x32, 0xF6, 0x0, 0x44, 0x0, 0x32, 0xFF, 0x0, 0x16, 0x0, 0x33, 0xF6, 0x0, 0x17, 0x0, 0x33, 0xFF, 0x0, 0x20, 0x0, 0x33, 0xFB, 0x0, 0x21, 0x0, 0x33, 0xFF, 0x0, 0x2B, 0x0, 0x33, 0xF2, 0x0, 0x2C, 0x0, 0x33, 0xFF, 0x0, 0x30, 0x0, 0x33, 0xFB, 0x0, 0x31, 0x0, 0x33, 0xF2, 0x0, 0x32, 0x0, 0x33, 0xFB, 0x0, 0x33, 0x0, 0x33, 0xFF, 0x0, 0x35, 0x0, 0x33, 0x35, 0x0, 0x36, 0x0, 0x33, 0xFF, 0x0, 0x3A, 0x0, 0x33, 0xF2, 0x0, 0x3B, 0x0, 0x33, 0xFF, 0x0, 0x43, 0x0, 0x33, 0xF6, 0x0, 0x44, 0x0, 0x33, 0xFF, 0x0, 0x16, 0x0, 0x34, 0xF6, 0x0, 0x17, 0x0, 0x34, 0xFF, 0x0, 0x20, 0x0, 0x34, 0xF6, 0x0, 0x21, 0x0, 0x34, 0xFF, 0x0, 0x2B, 0x0, 0x34, 0xFB, 0x0, 0x2C, 0x0, 0x34, 0xFF, 0x0, 0x33, 0x0, 0x34, 0xF6, 0x0, 0x34, 0x0, 0x34, 0xF7, 0x0, 0x35, 0x0, 0x34, 0x55, 0x0, 0x36, 0x0, 0x34, 0xF6, 0x0, 0x39, 0x0, 0x34, 0xFB, 0x0, 0x3A, 0x0, 0x34, 0xFF, 0x0, 0x43, 0x0, 0x34, 0xFB, 0x0, 0x45, 0x0, 0x34, 0xFF, 0x0, 0x16, 0x0, 0x35, 0xF6, 0x0, 0x17, 0x0, 0x35, 0xFF, 0x0, 0x2A, 0x0, 0x35, 0xF2, 0x0, 0x2B, 0x0, 0x35, 0xFF, 0x0, 0x35, 0x0, 0x35, 0xDF, 0x0, 0x36, 0x0, 0x35, 0x7A, 0x0, 0x37, 0x0, 0x35, 0xFF, 0x0, 0x44, 0x0, 0x35, 0xF6, 0x0, 0x45, 0x0, 0x35, 0xFF, 0x0, 0x16, 0x0, 0x36, 0xF6, 0x0, 0x17, 0x0, 0x36, 0xFF, 0x0, 0x20, 0x0, 0x36, 0xF2, 0x0, 0x21, 0x0, 0x36, 0xFF, 0x0, 0x29, 0x0, 0x36, 0xF6, 0x0, 0x2A, 0x0, 0x36, 0xFB, 0x0, 0x2B, 0x0, 0x36, 0xFF, 0x0, 0x36, 0x0, 0x36, 0x15, 0x0, 0x37, 0x0, 0x36, 0xFF, 0x0, 0x44, 0x0, 0x36, 0xF6, 0x0, 0x45, 0x0, 0x36, 0xFF, 0x0, 0x16, 0x0, 0x37, 0xFB, 0x0, 0x17, 0x0, 0x37, 0xFF, 0x0, 0x21, 0x0, 0x37, 0xF6, 0x0, 0x22, 0x0, 0x37, 0xFF, 0x0, 0x27, 0x0, 0x37, 0xF6, 0x0, 0x28, 0x0, 0x37, 0xF2, 0x0, 0x29, 0x0, 0x37, 0xFF, 0x0, 0x36, 0x0, 0x37, 0x7A, 0x0, 0x37, 0x0, 0x37, 0xBE, 0x0, 0x38, 0x0, 0x37, 0xFF, 0x0, 0x44, 0x0, 0x37, 0xF6, 0x0, 0x45, 0x0, 0x37, 0xFF, 0x0, 0x17, 0x0, 0x38, 0xF6, 0x0, 0x18, 0x0, 0x38, 0xFF, 0x0, 0x21, 0x0, 0x38, 0xF6, 0x0, 0x27, 0x0, 0x38, 0xFF, 0x0, 0x37, 0x0, 0x38, 0x15, 0x0, 0x38, 0x0, 0x38, 0xFF, 0x0, 0x45, 0x0, 0x38, 0xF6, 0x0, 0x46, 0x0, 0x38, 0xFF, 0x0, 0x17, 0x0, 0x39, 0xF6, 0x0, 0x18, 0x0, 0x39, 0xFF, 0x0, 0x37, 0x0, 0x39, 0x7A, 0x0, 0x38, 0x0, 0x39, 0xBF, 0x0, 0x39, 0x0, 0x39, 0xFF, 0x0, 0x45, 0x0, 0x39, 0xF6, 0x0, 0x46, 0x0, 0x39, 0xFF, 0x0, 0x17, 0x0, 0x3A, 0xF6, 0x0, 0x18, 0x0, 0x3A, 0xFF, 0x0, 0x38, 0x0, 0x3A, 0x35, 0x0, 0x39, 0x0, 0x3A, 0xFF, 0x0, 0x45, 0x0, 0x3A, 0xF6, 0x0, 0x46, 0x0, 0x3A, 0xFF, 0x0, 0x18, 0x0, 0x3B, 0xF6, 0x0, 0x19, 0x0, 0x3B, 0xFF, 0x0, 0x38, 0x0, 0x3B, 0x35, 0x0, 0x39, 0x0, 0x3B, 0xFF, 0x0, 0x45, 0x0, 0x3B, 0xFB, 0x0, 0x47, 0x0, 0x3B, 0xFF, 0x0, 0x18, 0x0, 0x3C, 0xF6, 0x0, 0x19, 0x0, 0x3C, 0xFF, 0x0, 0x38, 0x0, 0x3C, 0x35, 0x0, 0x39, 0x0, 0x3C, 0xFF, 0x0, 0x46, 0x0, 0x3C, 0xF6, 0x0, 0x47, 0x0, 0x3C, 0xFF, 0x0, 0x18, 0x0, 0x3D, 0xFB, 0x0, 0x19, 0x0, 0x3D, 0xFF, 0x0, 0x38, 0x0, 0x3D, 0x35, 0x0, 0x39, 0x0, 0x3D, 0xFF, 0x0, 0x46, 0x0, 0x3D, 0xF6, 0x0, 0x47, 0x0, 0x3D, 0xFF, 0x0, 0x19, 0x0, 0x3E, 0xF6, 0x0, 0x1A, 0x0, 0x3E, 0xFF, 0x0, 0x38, 0x0, 0x3E, 0x15, 0x0, 0x39, 0x0, 0x3E, 0xFF, 0x0, 0x46, 0x0, 0x3E, 0xF6, 0x0, 0x47, 0x0, 0x3E, 0xFF, 0x0, 0x19, 0x0, 0x3F, 0xFB, 0x0, 0x1B, 0x0, 0x3F, 0xFF, 0x0, 0x37, 0x0, 0x3F, 0xBF, 0x0, 0x38, 0x0, 0x3F, 0x59, 0x0, 0x39, 0x0, 0x3F, 0xFF, 0x0, 0x46, 0x0, 0x3F, 0xFB, 0x0, 0x47, 0x0, 0x3F, 0xFF, 0x0, 0x1A, 0x0, 0x40, 0xF6, 0x0, 0x1B, 0x0, 0x40, 0xFF, 0x0, 0x30, 0x0, 0x40, 0xDF, 0x0, 0x34, 0x0, 0x40, 0x9A, 0x0, 0x36, 0x0, 0x40, 0x35, 0x0, 0x38, 0x0, 0x40, 0xFF, 0x0, 0x47, 0x0, 0x40, 0xF6, 0x0, 0x48, 0x0, 0x40, 0xFF, 0x0, 0x1B, 0x0, 0x41, 0xFB, 0x0, 0x1C, 0x0, 0x41, 0xFF, 0x0, 0x2E, 0x0, 0x41, 0x35, 0x0, 0x30, 0x0, 0x41, 0x9A, 0x0, 0x31, 0x0, 0x41, 0x7A, 0x0, 0x34, 0x0, 0x41, 0x9A, 0x0, 0x35, 0x0, 0x41, 0xDF, 0x0, 0x36, 0x0, 0x41, 0xFF, 0x0, 0x47, 0x0, 0x41, 0xF6, 0x0, 0x48, 0x0, 0x41, 0xFF, 0x0, 0x1B, 0x0, 0x42, 0xF6, 0x0, 0x1C, 0x0, 0x42, 0xFF, 0x0, 0x2D, 0x0, 0x42, 0x7A, 0x0, 0x2E, 0x0, 0x42, 0x55, 0x0, 0x2F, 0x0, 0x42, 0xFF, 0x0, 0x47, 0x0, 0x42, 0xF6, 0x0, 0x48, 0x0, 0x42, 0xFF, 0x0, 0x1C, 0x0, 0x43, 0xF6, 0x0, 0x1D, 0x0, 0x43, 0xFF, 0x0, 0x2E, 0x0, 0x43, 0x9A, 0x0, 0x2F, 0x0, 0x43, 0x14, 0x0, 0x30, 0x0, 0x43, 0xFF, 0x0, 0x47, 0x0, 0x43, 0xF6, 0x0, 0x48, 0x0, 0x43, 0xFF, 0x0, 0x1D, 0x0, 0x44, 0xFB, 0x0, 0x1F, 0x0, 0x44, 0xFF, 0x0, 0x30, 0x0, 0x44, 0x14, 0x0, 0x31, 0x0, 0x44, 0xDF, 0x0, 0x32, 0x0, 0x44, 0xFF, 0x0, 0x47, 0x0, 0x44, 0xF2, 0x0, 0x48, 0x0, 0x44, 0xFF, 0x0, 0x1E, 0x0, 0x45, 0xFB, 0x0, 0x20, 0x0, 0x45, 0xFF, 0x0, 0x47, 0x0, 0x45, 0xFB, 0x0, 0x48, 0x0, 0x45, 0xFF, 0x0, 0x20, 0x0, 0x46, 0xF6, 0x0, 0x21, 0x0, 0x46, 0xFF, 0x0, 0x46, 0x0, 0x46, 0xF2, 0x0, 0x47, 0x0, 0x46, 0xFF, 0x0, 0x21, 0x0, 0x47, 0xF6, 0x0, 0x22, 0x0, 0x47, 0xFB, 0x0, 0x23, 0x0, 0x47, 0xFF, 0x0, 0x45, 0x0, 0x47, 0xF6, 0x0, 0x46, 0x0, 0x47, 0xFF, 0x0, 0x22, 0x0, 0x48, 0xFB, 0x0, 0x23, 0x0, 0x48, 0xF6, 0x0, 0x24, 0x0, 0x48, 0xFF, 0x0, 0x44, 0x0, 0x48, 0xF6, 0x0, 0x45, 0x0, 0x48, 0xFF, 0x0, 0x24, 0x0, 0x49, 0xFB, 0x0, 0x25, 0x0, 0x49, 0xF6, 0x0, 0x26, 0x0, 0x49, 0xFB, 0x0, 0x27, 0x0, 0x49, 0xFF, 0x0, 0x42, 0x0, 0x49, 0xFB, 0x0, 0x44, 0x0, 0x49, 0xFF, 0x0, 0x26, 0x0, 0x4A, 0xFB, 0x0, 0x27, 0x0, 0x4A, 0xF6, 0x0, 0x29, 0x0, 0x4A, 0xFF, 0x0, 0x41, 0x0, 0x4A, 0xF6, 0x0, 0x42, 0x0, 0x4A, 0xFF, 0x0, 0x29, 0x0, 0x4B, 0xFB, 0x0, 0x2A, 0x0, 0x4B, 0xF6, 0x0, 0x2C, 0x0, 0x4B, 0xFB, 0x0, 0x2D, 0x0, 0x4B, 0xFF, 0x0, 0x3E, 0x0, 0x4B, 0xFB, 0x0, 0x3F, 0x0, 0x4B, 0xF6, 0x0, 0x40, 0x0, 0x4B, 0xFB, 0x0, 0x41, 0x0, 0x4B, 0xFF, 0x0, 0x2D, 0x0, 0x4C, 0xF6, 0x0, 0x32, 0x0, 0x4C, 0xFB, 0x0, 0x33, 0x0, 0x4C, 0xFF, 0x0, 0x3A, 0x0, 0x4C, 0xFB, 0x0, 0x3B, 0x0, 0x4C, 0xF6, 0x0, 0x3E, 0x0, 0x4C, 0xFF, 0x0, 0x33, 0x0, 0x4D, 0xF6, 0x0, 0x3A, 0x0, 0x4D, 0xFF, 0x0, 0x63, 0x0, 0x63};
//uint8_t testimg[] = {0x00, 0x01, 0x02, 0x03};

uint32_t crc_testimg = 0;

void setup() {
  // put your setup code here, to run once:
  I2CCom.OnDeviceConnected = OnConnected;
  I2CCom.OnDeviceDisconnected = OnDisconnected;
  I2CCom.begin();
  I2CCom.Ignore(0x27);
  Serial.begin(57600);
  crc_testimg = crc32(testimg, sizeof(testimg));
}

bool q_enabled = true;
void loop() {
  // put your main code here, to run repeatedly:
  char r = Serial.read();
  if (r == 'q') {
    if (Serial.read() == 'e') {
      q_enabled = !q_enabled;
      return;
    }
    if (Serial.read() == 'o') {
      Smart();
    }
  }
  if (r == 'i') {
    Serial.println("Enter I2C: ");
    byte buffer[128];
    int length = 0;
    while (true) {
      String read = Serial.readStringUntil(' ');
      int _int = read.toInt();
      if (_int < 0 || _int > 255) {
        break;
      }
      buffer[length] = _int;
      length++;
    }
    Serial.println(length);
    Serial.println(gI2C.SendRawCmd(buffer, length));
  }
  if (q_enabled) {
    Smart();
  }
  I2CCom.ScanDevices();
  delay(50);
}

void OnConnected(int address) {
  Serial.print("Connected: ");
  Serial.println(address);
}

void OnDisconnected(int address) {
  Serial.print("Disconnected: ");
  Serial.println(address);
}

void Reload() {
  gI2C.Objects_Create(0, 5);
  gI2C.Objects_BlobAsset(0, 1);
  gI2C.Objects_Resize(0, 0, 100, 100);
}

void Init() {
  gI2C.InitIfNot();
  gI2C.WriteAssetOrCRC(1, testimg, sizeof(testimg));
  Reload();
}

void Smart() {
  Init();
}

uint32_t crc32(const uint8_t *s, size_t n) {
  uint32_t crc = 0xFFFFFFFF;

  for (size_t i = 0; i < n; i++) {
    char ch = s[i];
    for (size_t j = 0; j < 8; j++) {
      uint32_t b = (ch ^ crc) & 1;
      crc >>= 1;
      if (b) crc = crc ^ 0xEDB88320;
      ch >>= 1;
    }
  }

  return ~crc;
}
